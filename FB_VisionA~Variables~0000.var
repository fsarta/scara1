{ CustomGroupDefinition('ee164e7b-4566-4dd2-aee1-7a3f148a46c0', 'VAR_INPUT') }
{ CustomGroupDefinition('9f5dbcaa-3915-4892-a63a-eacee91b33b9', 'VAR_OUTPUT') }
{ CustomGroupDefinition('359d65b0-e4c1-47a6-96d1-939b0555078a', '') }

VAR_INPUT
    xStartSequence : BOOL { CustomGroupReference('ee164e7b-4566-4dd2-aee1-7a3f148a46c0') } {Id('8dae1b71-f87b-416f-9e98-ef75ffba5d12')}; (*Rising edge starts one vision cycle*)
    xResetError : BOOL { CustomGroupReference('ee164e7b-4566-4dd2-aee1-7a3f148a46c0') } {Id('5bb7f1ec-37ff-40ea-a101-97d8a458a8f1')}; (*Rising edge to clear a latched error*)
    xEnableCyclicTrigger : BOOL { CustomGroupReference('ee164e7b-4566-4dd2-aee1-7a3f148a46c0') } {Id('cc9722c1-087f-4cd8-a76b-304ff32bd44f')}; (*Set TRUE to enable internal timed trigger*)
    tCyclicTriggerTime : TIME := TIME#1s { CustomGroupReference('ee164e7b-4566-4dd2-aee1-7a3f148a46c0') } {Id('abf6ea82-8a04-465c-9d45-e2a07529e21d')}; (*Time between triggers in cyclic mode*)
    Visor_Receive : Yt_ByteArray72 { CustomGroupReference('ee164e7b-4566-4dd2-aee1-7a3f148a46c0') } {Id('381e23a5-04da-4d16-b447-41ec63998515')};
    i_stConnectionStatus : EIP_STATUS_REF { CustomGroupReference('ee164e7b-4566-4dd2-aee1-7a3f148a46c0') } {Id('1450ef68-fa6b-478e-8cb2-4643d8cfd366')};
END_VAR

VAR_OUTPUT
    Visor_Transmit : Yt_ByteArray3 { CustomGroupReference('9f5dbcaa-3915-4892-a63a-eacee91b33b9') } {Id('c0ef6f23-a6b3-4730-95f3-22b0c06a7628')};
    eState : E_VisionMgr_State { CustomGroupReference('9f5dbcaa-3915-4892-a63a-eacee91b33b9') } {Id('bc94d9f0-9ec8-455d-84c2-2071f21d1f5d')}; (*Current state (for HMI/debug)*)
    xActive : BOOL { CustomGroupReference('9f5dbcaa-3915-4892-a63a-eacee91b33b9') } {Id('dc4f0fd3-a9d5-4f0d-87ce-873992b06627')}; (*TRUE while the sequence is running*)
    xDone : BOOL { CustomGroupReference('9f5dbcaa-3915-4892-a63a-eacee91b33b9') } {Id('c3ffac13-c8db-4eec-ab23-4d62d58d202b')}; (*One-shot pulse: TRUE when results are ready*)
    xError : BOOL { CustomGroupReference('9f5dbcaa-3915-4892-a63a-eacee91b33b9') } {Id('01263196-6c40-45eb-86c5-ec1df01e7325')}; (*Latched: TRUE if the sequence failed*)
    stLastGoodResult : DT_VISOR_Assem5_ResultData { CustomGroupReference('9f5dbcaa-3915-4892-a63a-eacee91b33b9') } {Id('6ef0e6bc-e072-4e4c-bb07-5427232beda6')}; (*Result Data*)
    xVisorConnected : BOOL { CustomGroupReference('9f5dbcaa-3915-4892-a63a-eacee91b33b9') } {Id('ca70a4ad-4e11-40e8-b486-e911d69b5922')};
    xVisorReady : BOOL { CustomGroupReference('9f5dbcaa-3915-4892-a63a-eacee91b33b9') } {Id('b626c8f7-6780-45bd-abf6-130871ca7c77')};
END_VAR

VAR
    fbVisor : FB_VisorDriver { CustomGroupReference('359d65b0-e4c1-47a6-96d1-939b0555078a') } {Id('75b1d5e8-af6e-40a7-b7d8-e19445928bf2')}; (*Internal Driver Instance*)
    eInternalState : E_VisionMgr_State { CustomGroupReference('359d65b0-e4c1-47a6-96d1-939b0555078a') } {Id('d5e40208-bd69-414e-be9f-51088403c306')}; (*Sequencer State*)
    rtStartSequence : R_TRIG { CustomGroupReference('359d65b0-e4c1-47a6-96d1-939b0555078a') } {Id('3922fc41-b9be-4c9b-8f2e-c17b60c1120b')};
    rtResetError : R_TRIG { CustomGroupReference('359d65b0-e4c1-47a6-96d1-939b0555078a') } {Id('d7684f4a-a2e7-4aff-8402-fb4b4353dbfd')};
    tonCyclicTimer : TON { CustomGroupReference('359d65b0-e4c1-47a6-96d1-939b0555078a') } {Id('58606961-7a9f-4151-87fd-5f4ef571b412')}; (*Timer for cyclic mode*)
    xInternalTrigger : BOOL { CustomGroupReference('359d65b0-e4c1-47a6-96d1-939b0555078a') } {Id('16891890-c5e7-4052-9646-fac11be17496')};
    xInternalReset : BOOL { CustomGroupReference('359d65b0-e4c1-47a6-96d1-939b0555078a') } {Id('600cd18a-7556-4e41-b35e-36e8cd60b6d6')};
    tonTimeout : TON { CustomGroupReference('359d65b0-e4c1-47a6-96d1-939b0555078a') } {Id('b1727fb8-9117-4f1b-8033-3c396bc655d3')};
    xStartSignal : BOOL { CustomGroupReference('359d65b0-e4c1-47a6-96d1-939b0555078a') } {Id('fcac100b-6fb9-4739-88df-76de3a69e953')};
END_VAR
